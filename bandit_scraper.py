# Universal Bandit: Adaptive Web Scraper\n# Edwin Oey / NEXUS Proto-AGI Portfolio Product #1\n\nimport requests\nfrom bs4 import BeautifulSoup\nimport numpy as np\nfrom playwright.sync_api import sync_playwright\nimport time\n\nclass MultiArmedBandit:\n    def __init__(self, n_arms=3, alpha=0.1):\n        self.n_arms = n_arms  # 0: requests+BS4, 1: Playwright, 2: Selenium stub\n        self.q = np.zeros(n_arms)  # action values\n        self.N = np.zeros(n_arms)  # pulls\n        self.alpha = alpha\n\n    def select_arm(self):\n        return np.argmax(self.q)  # epsilon-greedy stub (expand later)\n\n    def update(self, arm, reward):\n        self.N[arm] += 1\n        self.q[arm] += self.alpha * (reward - self.q[arm])\n\nclass UniversalBandit:\n    def __init__(self):\n        self.bandit = MultiArmedBandit()\n\n    def scrape(self, url, target_selector='h1'):\n        arm = self.bandit.select_arm()\n        reward = 0\n        content = ''\n\n        try:\n            if arm == 0:  # Static: requests + BS4\n                resp = requests.get(url, timeout=10)\n                soup = BeautifulSoup(resp.text, 'html.parser')\n                content = soup.select_one(target_selector)\n                reward = 1 if content else 0\n            elif arm == 1:  # Dynamic: Playwright\n                with sync_playwright() as p:\n                    browser = p.chromium.launch()\n                    page = browser.new_page()\n                    page.goto(url)\n                    content = page.query_selector(target_selector)\n                    content = content.text_content() if content else ''\n                    browser.close()\n                    reward = 1 if content else 0\n            # Arm 2: Stub for Selenium/others\n        except:\n            reward = 0\n\n        self.bandit.update(arm, reward)\n        return content, reward, arm\n\n# Demo\nif __name__ == '__main__':\n    ub = UniversalBandit()\n    url = 'https://finance.yahoo.com'\n    for _ in range(5):\n        content, r, a = ub.scrape(url)\n        print(f'Arm {a}, Reward: {r}, Content: {content[:100]}...')\n        time.sleep(2)